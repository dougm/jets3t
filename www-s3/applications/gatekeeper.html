<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="content-type"
        content="text/html; charset=utf-8" />
  <meta name="robots"
        content="all" />
  <meta name="generator"
        content="RapidWeaver" />
  <meta name="generatorversion"
        content="3.6.7 (2691)" />

  <title>JetS3t - Gatekeeper</title>
  <link rel="stylesheet"
        type="text/css"
        media="screen"
        href="../rw_common/themes/ideal/styles.css" />
  <link rel="stylesheet"
        type="text/css"
        media="print"
        href="../rw_common/themes/ideal/print.css" />
  <link rel="stylesheet"
        type="text/css"
        media="handheld"
        href="../rw_common/themes/ideal/handheld.css" />
  <link rel="stylesheet"
        type="text/css"
        media="screen"
        href=
        "../rw_common/themes/ideal/css/width/width_variable.css" />
  <link rel="stylesheet"
        type="text/css"
        media="screen"
        href=
        "../rw_common/themes/ideal/css/sidebar/sidebar_right.css" />
        
<script type="text/javascript"
      src="../rw_common/themes/ideal/javascript.js">
</script>
</head>

<body>
  <div id="container">
    <!-- Start container -->

    <div id="pageHeader">
      <!-- Start page header -->

      <h1>JetS3t</h1>

      <h2>An open source Java toolkit for Amazon S3</h2>
    </div><!-- End page header -->

    <div id="sidebarContainer">
      <!-- Start Sidebar wrapper -->

      <div id="navcontainer">
        <!-- Start Navigation -->

        <ul>
          <li><a href="../index.html"
             rel="self">Home</a></li>

          <li><a href="../toolkit/toolkit.html"
             rel="self">Toolkit</a></li>

          <li>
            <a href="../applications/applications.html"
                rel="self"
                class="currentAncestor">Applications</a>

            <ul>
              <li><a href="../applications/cockpit.html"
                 rel="self">Cockpit</a></li>

              <li><a href="../applications/synchronize.html"
                 rel="self">Synchronize</a></li>

              <li>
                <a href="gatekeeper.html"
                    rel="self"
                    id="current">Gatekeeper</a>

                <ul>
                  <li><a href=
                  "../applications/gatekeeper-concepts.html"
                     rel="self">Concepts</a></li>
                </ul>
              </li>

              <li><a href="../applications/cockpitlite.html"
                 rel="self">CockpitLite</a></li>

              <li><a href="../applications/uploader.html"
                 rel="self">Uploader</a></li>
            </ul>
          </li>

          <li><a href="../downloads.html"
             rel="self">Downloads</a></li>

          <li><a href="../support.html"
             rel="self">Help &amp; Support</a></li>
        </ul>
      </div><!-- End navigation -->

      <div id="sidebar">
        <!-- Start sidebar content -->

        <h1 class="sideHeader"></h1><!-- Sidebar header -->

        <br />

        <p>Learn how to take advantage of Amazon Web Services with
        my book <a target="_blank"
           href=
           "http://www.amazon.com/gp/product/0596515812?ie=UTF8&amp;tag=jamesmurty-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=0596515812">
        Programming Amazon Web Services: S3, EC2, SQS, FPS, and
        SimpleDB</a> (O'Reilly 2008)</p>

        <p align="center"><a target="_blank"
           href=
           "http://www.amazon.com/gp/product/0596515812?ie=UTF8&amp;tag=jamesmurty-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=0596515812">
        <img class="right fancy"
             border="0"
             src=
             "http://www.jamesmurty.com/wordpress/wp-content/uploads/2008/03/21xosvbehnl_aa_sl160_.jpg" /></a><img class="right"
             src=
             "http://www.assoc-amazon.com/e/ir?t=jamesmurty-20&amp;l=as2&amp;o=1&amp;a=0596515812"
             width="1"
             height="1"
             border="0"
             alt=""
             style=
             "border:none !important; margin:0px !important;" /></p>
        <br />

        <p>Your donation will allow me to continue improving
        JetS3t. Thanks very much,
        <br />
        James.</p>

        <form action="https://www.paypal.com/cgi-bin/webscr"
              method="post">
          <input type="hidden"
                name="cmd"
                value="_s-xclick" /><input type="image"
                src=
                "https://www.paypal.com/en_AU/i/btn/x-click-but04.gif"
                border="0"
                name="submit"
                alt=
                "Make payments with PayPal - it's fast, free and secure!" /><img alt=""
                border="0"
                src="https://www.paypal.com/en_AU/i/scr/pixel.gif"
                width="1"
                height="1" /><input type="hidden"
                name="encrypted"
                value=
                "-----BEGIN PKCS7-----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-----END PKCS7----- " />
        </form>
        <br />
        <!-- sidebar content you enter in the page inspector -->
         <!-- sidebar content such as the blog archive links -->
      </div><!-- End sidebar content -->
    </div><!-- End sidebar wrapper -->

    <div id="contentContainer">
      <!-- Start main content wrapper -->

      <div id="content">
        <!-- Start content -->

        <div id="breadcrumbcontainer">
          <!-- Start the breadcrumb wrapper -->

          <ul>
            <li><a href=
            "../index.html">Home</a>&nbsp;&gt;&nbsp;</li>

            <li><a href=
            "../applications/applications.html">Applications</a>&nbsp;&gt;&nbsp;</li>

            <li><a href=
            "gatekeeper.html">Gatekeeper</a>&nbsp;&gt;&nbsp;</li>
          </ul>
        </div><!-- End breadcrumb -->

        <h1>JetS3t Gatekeeper</h1>

        <p>Gatekeeper is a server-side application for authorizing
        client applications to interact with an S3 account without
        providing the client with the AWS login credentials. The
        Gatekeeper uses the S3 <a href=
        "http://docs.amazonwebservices.com/AmazonS3/2006-03-01/RESTAuthentication.html"
           target="_blank">Query String Authorization</a> URL
           signing capabilities to generate time-limited URLs that
           client applications use to Upload, Download, and Delete
           objects in S3.</p>

        <p>Gatekeeper is primarily intended for situations where a
        service provider has an S3 account where they store data on
        behalf of clients. The service provider manages the S3
        storage on behalf of the client, who need not know or care
        that S3 is the underlying technology being used.</p>

        <p>Gatekeeper was designed to work with the <a href=
        "/applications/cockpitlite.html">CockpitLite</a> and
        <a href="/applications/uploader.html">Uploader</a>
        client-side applications that are included in the JetS3t
        suite.</p>

        <h2>Introductory Concepts</h2>

        <p>Although a Gatekeeper Java Servlet implementation is
        available as part of the JetS3t suite, the concepts
        involved in providing a gatekeeper-like service for S3
        could be easily implemented in other server-side languages.
        These concepts are discussed in a generic way in <a href=
        "gatekeeper-concepts.html">Gatekeeper Concepts</a>, please
        read this document first if you wish to understand how the
        Gatekeeper works, or implement your own version of the
        Gatekeeper.</p>

        <h2>Running the Gatekeeper Servlet</h2>

        <p>The Gatekeeper servlet is packaged as a standard WAR
        (Web Application aRchive) file in the JetS3t distribution:
        <br />
        <b>servlets/gatekeeper/gatekeeper-0.6.1.war</b>
        <br />
        This WAR file can be deployed to any application server
        that is able to run Java servlets.</p>

        <p>For example, to deploy it to the <a href=
        "http://tomcat.apache.org/"
           target="_blank">Apache Tomcat</a> server simply copy the
           WAR file to the $TOMCAT_HOME/webapps directory. When you
           run Tomcat the servlet archive will be automatically
           extracted and run, and will be available at a URL
           looking something like this:
        <br />
        <b>http://localhost:8080/gatekeeper-0.6.1/GatekeeperServlet</b></p>

        <h2>Configuration</h2>

        <p>The JetS3t Gatekeeper is configurable in two ways: by
        configuring the standard functionality included with the
        servlet, and by adding <a href=
        "#specialised-classes">specialised functionality</a> with
        code modules. This section deals with the standard
        configuration.</p>

        <p>The Gatekeeper is configured by setting properties in
        the servlet's <b>web.xml</b> configuration file (found in
        the WEB-INF directory). The configuration includes two
        steps:</p>

        <ol>
          <li>Specific configuration parameters required by the
          implementation classes. For the default Gatekeeper, the
          only settings required are your AWS credentials and the
          name of an S3 bucket.</li>

          <li>If you wish to modify the Gatekeeper application to
          work with your own, existing authentication framework,
          you can provide your own implementation classes for the
          authentication modules: TransactionIdProvider,
          Gatekeeper, UrlSigner, and BucketLister.</li>
        </ol>

        <h3>Configuration Properties</h3>

        <table bgcolor="#FAFAFA"
               summary=
               "Configuration properties for Gatekeeper servlet">
          <tr>
            <th align="left"
                colspan="2">Properties for default
                implementation</th>
          </tr>

          <tr>
            <td valign="top"><b>AwsAccessKey</b></td>

            <td>AWS Access Key for an S3 Account</td>
          </tr>

          <tr>
            <td valign="top"><b>AwsSecretKey</b></td>

            <td>AWS Secret Key for an S3 Account</td>
          </tr>

          <tr>
            <td valign="top"><b>S3BucketName</b></td>

            <td>The name of the bucket where objects are stored,
            and where files will be uploaded to</td>
          </tr>

          <tr>
            <td valign="top"><b>SecondsToSign</b></td>

            <td>The number of seconds until signed URLs will expire
            <br />
            <sup>Default: 180</sup></td>
          </tr>

          <tr>
            <th align="left"
                colspan="2">Implementation Classes - Override these
                to implement specialized functionality</th>
          </tr>

          <tr>
            <td valign="top"><b>TransactionIdProviderClass</b></td>

            <td>A class that generates a unique transaction ID for
            each message received from a client.
            <br />
            <sup>Default:
            org.jets3t.servlets.gatekeeper.impl.DefaultTransactionIdProvider</sup></td>
          </tr>

          <tr>
            <td valign="top"><b>AuthorizerClass</b></td>

            <td>A class that determines whether or allow or deny a
            particular operation request
            <br />
            <sup>Default:
            org.jets3t.servlets.gatekeeper.impl.DefaultAuthorizer</sup></td>
          </tr>

          <tr>
            <td valign="top"><b>UrlSignerClass</b></td>

            <td>The class that generates signed URLs for GET, HEAD,
            PUT and DELETE operations.
            <br />
            <sup>Default:
            org.jets3t.servlets.gatekeeper.impl.DefaultUrlSigner</sup></td>
          </tr>

          <tr>
            <td valign="top"><b>BucketListerClass</b></td>

            <td>A class that returns a listing of a bucket's
            contents to the CockpitLite application. This listing
            may include all of a bucket's contents, or only a
            subset.
            <br />
            <sup>Default:
            org.jets3t.servlets.gatekeeper.impl.DefaultBucketLister</sup></td>
          </tr>
        </table>

        <h2><a name="authentication">User Authentication</a></h2>

        <p>The Gatekeeper application is designed to be extended
        with code modules that perform specific tasks, such as
        authenticating users and permitting them to perform
        specific operations on the mediated S3 account. However,
        the simplest way to enforce user authentication with the
        Gatekeeper is to put the servlet in a secured web location
        that is only accessible when the user enters a valid
        username and password.</p>

        <p>A simple form of user authentication can be applied by
        requiring HTTP Authorization. This authorization mechanism
        is supported by all web server and servlet engines and is
        relatively simple to setup and configure. By limiting
        access to the Gatekeeper in this way you can ensure that
        only authorized users can access the S3 account mediated by
        the Gatekeeper without having to implement your own
        modules.</p>

        <h2><a name="specialized-classes">Specializing the
        Gatekeeper</a></h2>

        <p>The Gatekeeper implementation can be specialized by
        plugging in code components to perform the tasks of the
        TransactionIdProvider, Gatekeeper, and UrlSigner. Each of
        these components has an abstract base class named after the
        component in the package <a href=
        "../api/org/jets3t/servlets/gatekeeper/package-frame.html">org.jets3t.servlets.gatekeeper</a>.</p>

        <p>The code components are plugged into the servlet by
        making the new implementation classes available to the
        servlet as a library or in the WEB-INF/classes directory,
        and changing the appropriate implementation class
        configuring property (see above) to refer to the new
        implementation.</p>

        <h3>Example implementation: RenameToUuidUrlSigner</h3>

        <p>The example UrlSigner implementation class <a href=
        "../api/org/jets3t/servlets/gatekeeper/impl/RenameToUuidUrlSigner.html">
        RenameToUuidUrlSigner</a> exends the DefaultUrlSigner to
        perform basic object renaming based on the Transaction ID
        that uniquely identifies each request message from a
        client. This class renames all objects to the format
        <b><i>transactionId</i>.<i>objectCount</i>.<i>objectExtension</i></b>,
        and adds a metadata property <b>transactionId</b> to store
        the transaction id. For example, a file uploaded with the
        name MyDocument.txt and assigned a transaction id ABC123
        will be renamed to ABC123.0.txt and will have a metadata
        property transactionId with the value ABC123.</p>

        <p>This class also recognises a special type of object used
        by the JetS3t Uploader application, and flagged with the
        special object metadata item
        <b>jets3t-uploader-summary-doc</b>. This special object is
        an XML document that may be generated as a summary of the
        files the Uploader has successfully stored to S3. This
        object is not renamed, as the Uploader application itself
        assigns the XML document with a name based on the
        transaction ID used for the prior uploads.</p>
      </div><!-- End content -->
    </div><!-- End main content wrapper -->

    <div class="clearer"></div>

    <div id="footer">
      <!-- Start Footer -->

      <p>© 2008 <a href="http://www.jamesmurty.com">James
      Murty</a></p>
    </div><!-- End Footer -->
  </div><!-- End container -->
</body>
</html>
