<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="content-type"
        content="text/html; charset=utf-8" />
  <meta name="robots"
        content="all" />
  <meta name="generator"
        content="RapidWeaver" />
  <meta name="generatorversion"
        content="3.5.1 (Build 264)" />

  <title>JetS3T - Synchronize</title>
  <link rel="stylesheet"
        type="text/css"
        media="screen"
        href="../rw_common/themes/ideal/styles.css" />
  <link rel="stylesheet"
        type="text/css"
        media="print"
        href="../rw_common/themes/ideal/print.css" />
  <link rel="stylesheet"
        type="text/css"
        media="handheld"
        href="../rw_common/themes/ideal/handheld.css" />
  <link rel="stylesheet"
        type="text/css"
        media="screen"
        href=
        "../rw_common/themes/ideal/css/width/width_variable.css" />
  <link rel="stylesheet"
        type="text/css"
        media="screen"
        href=
        "../rw_common/themes/ideal/css/sidebar/sidebar_right.css" />
        
<style type="text/css"
       media="all">
/*<![CDATA[*/
pre {
        font-face: arial;
        font-size: 1.2em;       
}

tt {
        font-face: arial;
        font-size: 1.2em;       
}
/*]]>*/
</style>
<script type="text/javascript"
      src="../rw_common/themes/ideal/javascript.js">
</script>
</head>

<body>
  <div id="container">
    <!-- Start container -->

    <div id="pageHeader">
      <!-- Start page header -->

      <h1>JetS3t</h1>

      <h2>An open source Java toolkit for Amazon S3</h2>
    </div><!-- End page header -->

    <div id="sidebarContainer">
      <!-- Start Sidebar wrapper -->

      <div id="navcontainer">
        <!-- Start Navigation -->

        <ul>
          <li><a href="../index.html"
             rel="self">Home</a></li>

          <li><a href="../toolkit/toolkit.html"
             rel="self">Toolkit</a></li>

          <li>
            <a href="../applications/applications.html"
                rel="self"
                class="currentAncestor">Applications</a>

            <ul>
              <li><a href="../applications/cockpit.html"
                 rel="self">Cockpit</a></li>

              <li><a href="synchronize.html"
                 rel="self"
                 id="current"
                 name="current">Synchronize</a></li>

              <li><a href="../applications/uploader.html"
                 rel="self">Uploader</a></li>

              <li><a href="../applications/gatekeeper.html"
                 rel="self">Gatekeeper</a></li>
            </ul>
          </li>

          <li><a href="../downloads.html"
             rel="self">Downloads</a></li>

          <li><a href="../support.html"
             rel="self">Help &amp; Support</a></li>
        </ul>
      </div><!-- End navigation -->

      <div class="sideHeader"></div><!-- Sidebar header -->

      <div id="sidebar">
        <!-- Start sidebar content -->

        <br />
        <!-- sidebar content you enter in the page inspector -->
         <!-- sidebar content such as the blog archive links -->
      </div><!-- End sidebar content -->
    </div><!-- End sidebar wrapper -->

    <div id="contentContainer">
      <!-- Start main content wrapper -->

      <div id="content">
        <!-- Start content -->

        <div id="breadcrumbcontainer">
          <!-- Start the breadcrumb wrapper -->

          <ul>
            <li><a href=
            "../index.html">Home</a>&nbsp;&gt;&nbsp;</li>

            <li><a href=
            "../applications/applications.html">Applications</a>&nbsp;&gt;&nbsp;</li>

            <li><a href=
            "synchronize.html">Synchronize</a>&nbsp;&gt;&nbsp;</li>
          </ul>
        </div><!-- End breadcrumb -->

        <h1>JetS3t Synchronize</h1>

        <p>Synchronize is a console (text mode) Java application
        for synchronizing directories on a computer with an Amazon
        S3 account.</p>

        <p>It is freely available as part of the <a href=
        "http://jets3t.dev.java.net">JetS3t</a> project which
        provides applications and a Java toolkit for Amazon's
        S3.</p>

        <p>Synchronize offers the following capabilities:</p>

        <ul>
          <li>Upload a directory and all its contents to S3</li>

          <li>Download a directory and all its contents from
          S3</li>

          <li>Automatically compress (gzip) and/or encrypt files
          sent to S3</li>

          <li>Sophisticated file comparisons used to determine
          whether files have changed, so only new or changed files
          are transferred</li>

          <li>Upload any number of files and/or directories at one
          time<font color="red">*</font></li>

          <li>Access Control List permissions of uploaded files can
          be set to PRIVATE, PUBLIC_READ or
          PUBLIC_READ_WRITE<font color="red">*</font></li>

          <li>When uploading files, specific file/directory paths
          can be ignored using <a href=
          "../toolkit/configuration.html#ignore">.jets3t-ignore
          settings files</a><font color="red">*</font></li>
        </ul><sup>Items with a red star (<font color=
        "red">*</font>) are new in JetS3t version 0.5.x</sup>

        <h3>Warning: Changed Usage</h3>

        <p>Please not that the parameters required by Synchronize,
        and their ordering, have changed since the original version
        of Synchronize released with JetS3t version 0.4.0.
        <br />
        When updating, users of the original Synchronize version
        <b>must</b> update their scripts and re-test them to ensure
        they work as expected.</p>

        <h2>Getting Started</h2>

        <p>Synchronize can be run from the command line using the
        scripts included in the <b>bin</b> directory of the JetS3t
        distribution.</p>

        <p>For Windows computers use the script
        <tt>synchronize.bat</tt>.</p>

        <p>For Unixy computers, use the script
        <tt>synchronize.sh</tt>.</p>

        <p>Files are copied to S3 with an UP(load) operation, and
        copied from S3 with a DOWN(load). By default, files are
        only transferred only if they are new or have changed
        relative to the destination.</p>

        <h3>Properties File</h3>

        <p>Synchronize requires a Java properties file named
        <b>synchronize.properties</b> to be available in the
        classpath. This properties file must include at least the
        properties <tt>accesskey</tt> and <tt>secretkey</tt>, and
        may also require the property <tt>password</tt> if you use
        the crypto option. This file is a plain text file that will
        look something like this:</p>
        <pre>
####################################
# Synchronize application properties
#
# This file must be available on the 
# classpath when Synchronize is run
####################################

# AWS Access Key (required)
accesskey=&lt;YourAWSAccessKey&gt;

# AWS Secret Key (required)
secretkey=&lt;YourAWSSecretKey&gt;

# Access Control List setting to apply to uploads, must be one of: PRIVATE, PUBLIC_READ, PUBLIC_READ_WRITE
# The ACL setting defaults to PRIVATE if this setting is missing.
acl=PRIVATE

# Password used when encrypting/decrypting files. Only required when the --crypto setting is used.
# password=
</pre>

        <p>We use a properties file to store this information as we
        believe it will help keep your passwords secret. Storing
        them in a properties file is slightly more secure that
        typing them on the command line, and depending on the
        operating system you use it should be possible to set the
        access permissions on this file so no-one but you can read
        it.</p>

        <h2>Usage Instructions</h2>

        <p>To view Synchronize's usage instructions, run
        <tt>synchronize.sh --help</tt>. These instructions describe
        the command-line parameters required by Synchronize and the
        options available. To see some example commands see the
        <a href="#examples">Examples</a> section below.</p>
        <pre>
Usage: Synchronize [options] UP &lt;S3Path&gt; &lt;File/Directory&gt; (&lt;File/Directory&gt;...)
   or: Synchronize [options] DOWN &lt;S3Path&gt; &lt;DownloadDirectory&gt;

UP      : Synchronize the contents of the Local Directory with S3.
DOWN    : Synchronize the contents of S3 with the Local Directory
S3Path  : A path to the resource in S3. This must include at least the
          bucket name, but may also specify a path inside the bucket.
          E.g. &lt;bucketName&gt;/Backups/Documents/20060623
File/Directory : A file or directory on your computer to upload
DownloadDirectory : A directory on your computer where downloaded files
          will be stored

A property file with the name 'synchronize.properties' must be available in the
classpath and contains the following properties:
          accesskey : Your AWS Access Key (Required)
          secretkey : Your AWS Secret Key (Required)
          password  : Encryption password (only required when using crypto)
          acl       : ACL permissions for uploads (optional)

Options
-------
-h | --help
   Displays this help message.

-n | --noaction
   No action taken. No files will be changed locally or on S3, instead
   a report will be generating showing what will happen if the command
   is run without the -n option.

-q | --quiet
   Runs quietly and does not report on each action performed. The action
   summary is still displayed.

-f | --force
   Force tool to perform synchronization even when files are up-to-date.
   This may be useful if you need to update metadata or timestamps in S3.

-k | --keepfiles
   Keep files on destination instead of reverting/removing them.

-g | --gzip
   Compress (GZip) files when backing up and Decompress gzipped files
   when restoring.

-c | --crypto
   Encrypt files when backing up and decrypt encrypted files when restoring. If
   this option is specified the properties must contain a password.

Report
------
Report items are printed on a single line with an action flag followed by
the relative path of the file or S3 object. The flag meanings are...
N: A new file/object will be created
U: An existing file/object has changed and will be updated
D: A file/object existing on the target does not exist on the source and
   will be deleted.
d: A file/object existing on the target does not exist on the source but
   because the --keepfiles option was set it was not deleted.
R: An existing file/object has changed more recently on the target than on the
   source. The target version will be reverted to the older source version
r: An existing file/object has changed more recently on the target than on the
   source but because the --keepfiles option was set it was not reverted.
-: The file identical locally and in S3, no action is necessary.
F: A file identical locally and in S3 was updated due to the Force option.
</pre>

        <p><b><font color="red">WARNING</font></b>: Be <i>very</i>
        careful when restoring files from S3 to a directory that
        already contains files. By default Synchronize will delete
        any files in the target directory that are not present in
        S3, as it is helpfully synchronizing the contents of your
        the directory on your computer with the contents of S3.
        Mind you, if you do this for the wrong directory you can
        lose all your files!
        <br />
        For this reason, <b>always</b> test your Synchronize
        commands with the <tt>--noaction</tt> option before you run
        them for real - just to make sure you are not about to do
        something you will later regret.</p>

        <h2><a name="examples"
           id="examples">Examples</a></h2>

        <p>The best way to get the hang of Synchronize is to
        experiment with the commands on some test files you don't
        care about, and use the <a href="cockpit.html">JetS3t
        Cockpit</a> application to see how uploads are stored in
        S3.</p>

        <p>Before you start, modify the sample properties text file
        called <tt>synchronize.properties</tt> located in the
        <b>configs</b> directory to include your own S3 Access Key
        and Secret Key settings (see Getting Started above). Use
        the synchronize run scripts provided in the <b>bin</b>
        directory to run Synchronize.</p>

        <h3>Backing up files in S3</h3>

        <p>Let's say you have two directories containing important
        files (eg Documents and Reports) and you want to back them
        up to an S3 bucket called MyBackups (note that you should
        really use a more unique bucket name, like
        &lt;MyAWSAccessKey&gt;.MyBackups):</p>
        <pre>
synchronize.sh UP MyBackups Documents Reports
</pre>

        <p>After you have run this command once on your own
        computer and uploaded some files, try running the same
        command again. Synchronize will look at the contents of
        your S3 account and work out that it already contains your
        files, so it will not have any work to do.</p>

        <p>Now add a file or two to your Documents directory, and
        perhaps change one of the files as well. This time when you
        run the command, Synchronize will upload the new and
        changed files. Alternately, you can run the command with
        the <b>--noaction</b> option to make Synchronize tell you
        what it would do without actually doing the work:</p>
        <pre>
synchronize.sh --noaction UP MyBackups Documents Reports
</pre>

        <h3>Restoring files from S3</h3>

        <p>There are a few cases where you might want to restore a
        directory from S3. The simplest cases are when none of the
        files exist on your computer, for example if you have
        deleted the whole directory by mistake (oops!), or you want
        to download a copy of this directory to a second
        computer.</p>

        <p>Let's simulate this simple case by downloading your S3
        Documents to a new directory:</p>
        <pre>
mkdir NewDocumentsDirectory
synchronize.sh DOWN MyBackups NewDocumentsDirectory
</pre>

        <p>Synchronize will download all the contents of the S3
        directory to the new directory name. Like the UPLOAD
        example above, re-running this command will do nothing as
        Synchronize will detect that your NewDocumentsDirectory
        directory has the same contents as the S3 directory.</p>

        <p>This same command can restore missing files, such as if
        you accidently deleted a single file in your Documents
        directory. Try it now, delete one of the files in
        NewDocumentsDirectory and re-run the command to restore
        it.</p>

        <h3>Changed files</h3>

        <p>Things can get more complicated when you already have
        files that are in S3, but the files' contents do not match.
        For example, let's say that you backed up your documents
        earlier but after doing this one of your documents somehow
        got corrupted. In this case the default Synchronize
        DOWNLOAD command above will restore the file by reverting
        it to the backed-up version from S3.</p>

        <p><b>Warning!</b> To repeat: by default, Synchronize will
        <b>revert</b> changed files when downloading. That is, it
        will replace changed files on your computer with older
        versions from S3. So be careful!</p>

        <p>If you want to keep files you have updated and only
        download files not already on your computer you can prevent
        Synchronize from reverting files with the
        <tt>--keepfiles</tt> option. Let's say that you have
        changed a number of files in your NewDocumentsDir directory
        but one of them has been corrupted. You want to revert the
        one corrupt file but keep the others. To do this, delete
        the corrupted file then run the following Synchronize
        command:</p>
        <pre>
synchronize.sh --keepfiles DOWN MyBackups NewDocumentsDirectory
</pre>

        <p>With the keepfiles option, Synchronize will replace any
        missing files (ie the corrupted one) but leave the changed
        files alone.</p>

        <h3><a name="options"
           id="options">Options, Options</a></h3>

        <p>This sections describes the Synchronize options in more
        detail.</p>

        <p><b>noaction</b>: Synchronize will not perform any
        action, and will not upload or download any files, but it
        will print reports and summaries as if it was run normally.
        This option is very useful for checking what actions a
        Synchronize command will perform <b>before</b> running the
        command for real.</p>

        <p><b>quiet</b>: Synchronize will only print out a summary
        of its actions instead of a line-by-line report describing
        the action taken for each file.</p>

        <p><b>force</b>: Synchronize will upload/download files
        even when it thinks they have not been changed. You might
        want to do this if you're worried that Synchronize isn't
        correctly identifying which files have changed, and you
        want to force it to update every file.</p>

        <p><b>keepfiles</b>: This option tells Synchronize to keeps
        files that it would otherwise revert or delete. With this
        option set, files that have been updated on the destination
        compared to the source directory, which would normally be
        reverted, will be left alone. Also, files on the
        destination that have been deleted in the source directory
        will be left in place, rather than deleted.</p>

        <p><b>Note</b>: The keepfiles option can sometimes be
        convenient but isn't intended for regular use. In effect it
        prevents Synchronize from doing its main job, which is to
        maintain an identical directory structure between your
        computer and S3. If you have to use it regularly,
        Synchronize probably isn't the right tool for what you're
        trying to do.</p>

        <p><b>gzip</b>: Files are compressed to gzip files prior to
        being uploaded, and are decompressed when being downloaded.
        <b>Note</b> If Gzipped files are downloaded without this
        option they will not be decompressed, and will not have any
        file extension (like .gz) to indicate that they are gzip
        files. It will be your responsibility to decompress these
        files.</p>

        <p><b>crypto</b>: Files are encrypted with the password
        specified in the Properties File's <tt>password</tt>
        setting prior to being uploaded, or are decrypted with this
        password when being downloaded. <b>Note</b> If encrypted
        files are downloaded without this option they will not be
        decrypted, and will not have any file extension to indicate
        that they are encrypted files. It will be your
        responsibility to decrypt these files.</p>

        <h2>Notes</h2>

        <p><b>Compressing/encrypting uploads</b>: Synchronize will
        create temporary files when used with any upload options
        that change the contents of uploaded files, such as
        compressing or encrypting them. This means that you will
        need up to twice as much free space in your default temp
        directory as taken by the files you intend to upload.</p>
      </div><!-- End content -->
    </div><!-- End main content wrapper -->

    <div class="clearer"></div>

    <div id="footer">
      <!-- Start Footer -->

      <p>© 2006 James Murty</p>
    </div><!-- End Footer -->
  </div><!-- End container -->
</body>
</html>
