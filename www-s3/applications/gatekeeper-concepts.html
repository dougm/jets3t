<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="content-type"
        content="text/html; charset=utf-8" />
  <meta name="robots"
        content="all" />
  <meta name="generator"
        content="RapidWeaver" />
  <meta name="generatorversion"
        content="3.5.1 (Build 264)" />

  <title>JetS3t - Gatekeeper – Concepts</title>
  <link rel="stylesheet"
        type="text/css"
        media="screen"
        href="../rw_common/themes/ideal/styles.css" />
  <link rel="stylesheet"
        type="text/css"
        media="print"
        href="../rw_common/themes/ideal/print.css" />
  <link rel="stylesheet"
        type="text/css"
        media="handheld"
        href="../rw_common/themes/ideal/handheld.css" />
  <link rel="stylesheet"
        type="text/css"
        media="screen"
        href=
        "../rw_common/themes/ideal/css/width/width_variable.css" />
  <link rel="stylesheet"
        type="text/css"
        media="screen"
        href=
        "../rw_common/themes/ideal/css/sidebar/sidebar_right.css" />
        
<script type="text/javascript"
      src="../rw_common/themes/ideal/javascript.js">
</script>
</head>

<body>
  <div id="container">
    <!-- Start container -->

    <div id="pageHeader">
      <!-- Start page header -->

      <h1>JetS3t</h1>

      <h2>An open source Java toolkit for Amazon S3</h2>
    </div><!-- End page header -->

    <div id="sidebarContainer">
      <!-- Start Sidebar wrapper -->

      <div id="navcontainer">
        <!-- Start Navigation -->

        <ul>
          <li><a href="../index.html"
             rel="self">Home</a></li>

          <li><a href="../toolkit/toolkit.html"
             rel="self">Toolkit</a></li>

          <li>
            <a href="../applications/applications.html"
                rel="self"
                class="currentAncestor">Applications</a>

            <ul>
              <li><a href="../applications/cockpit.html"
                 rel="self">Cockpit</a></li>

              <li><a href="../applications/synchronize.html"
                 rel="self">Synchronize</a></li>

              <li><a href="../applications/uploader.html"
                 rel="self">Uploader</a></li>

              <li>
                <a href="../applications/gatekeeper.html"
                    rel="self"
                    class="currentAncestor">Gatekeeper</a>

                <ul>
                  <li><a href="gatekeeper-concepts.html"
                     rel="self"
                     id="current"
                     name="current">Concepts</a></li>
                </ul>
              </li>
            </ul>
          </li>

          <li><a href="../downloads.html"
             rel="self">Downloads</a></li>
        </ul>
      </div><!-- End navigation -->

      <div class="sideHeader"></div><!-- Sidebar header -->

      <div id="sidebar">
        <!-- Start sidebar content -->

        <br />
        <!-- sidebar content you enter in the page inspector -->
         <!-- sidebar content such as the blog archive links -->
      </div><!-- End sidebar content -->
    </div><!-- End sidebar wrapper -->

    <div id="contentContainer">
      <!-- Start main content wrapper -->

      <div id="content">
        <!-- Start content -->

        <div id="breadcrumbcontainer">
          <!-- Start the breadcrumb wrapper -->

          <ul>
            <li><a href=
            "../index.html">Home</a>&nbsp;&gt;&nbsp;</li>

            <li><a href=
            "../applications/applications.html">Applications</a>&nbsp;&gt;&nbsp;</li>

            <li><a href=
            "../applications/gatekeeper.html">Gatekeeper</a>&nbsp;&gt;&nbsp;</li>

            <li><a href=
            "gatekeeper-concepts.html">Concepts</a>&nbsp;&gt;&nbsp;</li>
          </ul>
        </div><!-- End breadcrumb -->

        <h1>Gatekeeper Concepts</h1>

        <p>There are three main capabilities a Gatekeeper service
        can provide:</p>

        <ol>
          <li>Allow clients to interact with S3 by providing the
          client with signed URLs</li>

          <li>Authorize or deny access to particular clients, based
          on some kind of access control rules</li>

          <li>Control how data is stored in S3, such as by choosing
          which bucket to store objects in or by re-naming objects
          to match an organizational structure imposed by the
          service provider</li>
        </ol>

        <p>To provide these capabilities a gatekeeper-compatible
        client application must be able to provide at least enough
        information to the Gatekeeper service for it to generate
        signed URLs. In addition to this, if the service performs
        authorization or other tasks the client may have to provide
        more information for the service to do its work. Finally,
        for advanced services that might change object names or
        metadata the service may need to be able to communicate
        information about changes it has made back to the
        client.</p>

        <p>These requirements mean that the Gatekeeper requires a
        flexible message format to communicate information between
        clients and the service. The message format must be able to
        represent client requests ranging from the simple to the
        complex, and it must be compatible with any server-side
        technology.</p>

        <h2>Gatekeeper Message</h2>

        <p>The Gatekeeper Message format meets these requirements
        by building messages based around a series of properties
        (name/value pairs) where the name of each property is
        organised into a hierarchy. The client sends a message to
        the Gatekeeper service as a request, and the service
        replies with a response message.</p>

        <table>
          <tr>
            <td colspan="2"><b>Request properties</b>
            <br />
            Properties describing the operation a client wishes to
            perform, particularly the type of operation and the S3
            object the operation will be performed on. There is a
            set of request properties for each S3 object the client
            wishes to operate on, with each set identified using a
            simple numbered <b>id</b> which starts at 0 for the
            first object, is 1 for the second object etc.</td>
          </tr>

          <tr>
            <td valign="top">
            <b>request|<i>id</i>|objectKey</b></td>

            <td>The object's key</td>
          </tr>

          <tr>
            <td valign="top">
            <b>request|<i>id</i>|signatureType</b></td>

            <td>The type of operation the client wishes to perform
            on an object, one of: <b>put</b>, <b>get</b>,
            <b>head</b>, <b>delete</b></td>
          </tr>

          <tr>
            <td valign="top">
            <b>request|<i>id</i>|bucketName</b></td>

            <td>The name of the bucket where the object will be
            stored</td>
          </tr>

          <tr>
            <td valign="top">
            <b>request|<i>id</i>|metadata|<i>name</i></b></td>

            <td>The object's metadata, such as Content-Length and
            Content-Type.
            <br />
            Each metadata item will have a corresponding property
            with a matching name</td>
          </tr>

          <tr>
            <td valign="top"><b>request|<i>id</i>|signedUrl</b>
            <br />
            <sup>Gatekeeper response only</sup></td>

            <td>A signed URL provided by the Gatekeeper service
            when a requested operation is allowed</td>
          </tr>

          <tr>
            <td valign="top"><b>request|<i>id</i>|declineReason</b>
            <br />
            <sup>Gatekeeper response only</sup></td>

            <td>An explanation as to why a requested operation was
            disallowed.
            <br />
            If this property is present in a Gatekeeper response
            there will be no corresponding <b>signedUrl</b>
            property.</td>
          </tr>

          <tr>
            <td colspan="2"><b>Message properties</b>
            <br />
            Properties concerning the gatekeeper message as a
            whole, such as a unique identifier the Gatekeeper may
            set for each message it processes</td>
          </tr>

          <tr>
            <td valign="top"><b>message|<i>name</i></b></td>

            <td>Any property specific to a request/response
            message.
            <br />
            The JetS3t Gateway servlet uses a message property to
            include a message-specific transaction id, eg
            <b>message|transactionId=1234</b></td>
          </tr>

          <tr>
            <td colspan="2"><b>Application properties</b>
            <br />
            Properties specific to the client application sending
            the message. These may be used to include additional
            information from or to the client.</td>
          </tr>

          <tr>
            <td valign="top"><b>application|<i>name</i></b></td>

            <td>Any property specific to a client application.
            <br />
            For example, a client application may prompt a user for
            a password or some other information that an advanced
            Gatekeeper service will use to decide whether or not to
            allow an operation.</td>
          </tr>
        </table>

        <h3>Example Messages</h3>

        <h2>Performing Requests</h2>
      </div><!-- End content -->
    </div><!-- End main content wrapper -->

    <div class="clearer"></div>

    <div id="footer">
      <!-- Start Footer -->

      <p>© 2006 James Murty</p>
    </div><!-- End Footer -->
  </div><!-- End container -->
</body>
</html>
